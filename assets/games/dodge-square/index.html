<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Dodge Square</title>
  <style>
    body { margin:0; background:#111; color:#eee; font-family:Arial, sans-serif; text-align:center; }
    h1 { margin-top:20px; }
    canvas { display:block; margin:20px auto; background:#222; border:2px solid #555; }
  </style>
</head>
<body>
  <h1>Dodge Square</h1>
  <p>Move with A/D or ←/→. Don’t get hit.</p>
  <canvas id="game" width="600" height="400"></canvas>

  <script>
    const c = document.getElementById("game");
    const ctx = c.getContext("2d");

    const player = { x: 280, y: 360, w: 40, h: 20, speed: 6 };
    let keys = {};
    let enemies = [];
    let spawnTimer = 0;
    let score = 0;
    let gameOver = false;

    document.addEventListener("keydown", e => { keys[e.key.toLowerCase()] = true; });
    document.addEventListener("keyup", e => { keys[e.key.toLowerCase()] = false; });

    function spawnEnemy() {
      const w = 30;
      const x = Math.random() * (c.width - w);
      enemies.push({ x, y: -30, w, h: 20, speed: 3 + Math.random()*3 });
    }

    function resetGame() {
      enemies = [];
      score = 0;
      gameOver = false;
      player.x = 280;
    }

    c.addEventListener("click", () => {
      if (gameOver) resetGame();
    });

    function update() {
      if (gameOver) return;

      // move player
      if (keys["a"] || keys["arrowleft"]) player.x -= player.speed;
      if (keys["d"] || keys["arrowright"]) player.x += player.speed;

      if (player.x < 0) player.x = 0;
      if (player.x + player.w > c.width) player.x = c.width - player.w;

      spawnTimer--;
      if (spawnTimer <= 0) {
        spawnEnemy();
        spawnTimer = 25; // lower = more enemies
      }

      enemies.forEach(e => {
        e.y += e.speed;
      });

      enemies = enemies.filter(e => e.y < c.height + 40);

      // collision
      enemies.forEach(e => {
        if (e.x < player.x + player.w &&
            e.x + e.w > player.x &&
            e.y < player.y + player.h &&
            e.y + e.h > player.y) {
          gameOver = true;
        }
      });

      if (!gameOver) score++;
    }

    function draw() {
      ctx.fillStyle = "#222";
      ctx.fillRect(0, 0, c.width, c.height);

      // player
      ctx.fillStyle = "#3af";
      ctx.fillRect(player.x, player.y, player.w, player.h);

      // enemies
      ctx.fillStyle = "#f33";
      enemies.forEach(e => {
        ctx.fillRect(e.x, e.y, e.w, e.h);
      });

      // score
      ctx.fillStyle = "#eee";
      ctx.font = "18px Arial";
      ctx.fillText("Score: " + score, 10, 20);

      if (gameOver) {
        ctx.font = "32px Arial";
        ctx.fillText("Game Over", c.width/2 - 80, c.height/2);
        ctx.font = "18px Arial";
        ctx.fillText("Click to restart", c.width/2 - 70, c.height/2 + 30);
      }
    }

    function loop() {
      update();
      draw();
      requestAnimationFrame(loop);
    }

    loop();
  </script>
</body>
</html>
